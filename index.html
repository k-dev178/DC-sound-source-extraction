<!doctype html>
<html lang="ko" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë””ì‹œ ë³´ì´ìŠ¤ë¦¬í”Œ ì¶”ì¶œê¸° â€” MP3 ë³€í™˜</title>

  <!-- SEO -->
  <meta name="description" content="ë””ì‹œ ì¸ì‚¬ì´ë“œ ë³´ì´ìŠ¤ë¦¬í”Œ ë§í¬/iframeì—ì„œ ì›ë³¸ ì˜¤ë””ì˜¤ë¥¼ ì¶”ì¶œí•˜ê³  MP3ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤." />
  <meta name="robots" content="index, follow" />
  <!-- ë°°í¬ í›„ ì‹¤ì œ ë„ë©”ì¸ìœ¼ë¡œ êµì²´ -->
  <link rel="canonical" href="https://dc-sound-source-extraction.onrender.com/" />

  <!-- OG/Twitter -->
  <meta property="og:title" content="ë””ì‹œ ë³´ì´ìŠ¤ë¦¬í”Œ ì¶”ì¶œê¸° â€” MP3 ë³€í™˜" />
  <meta property="og:description" content="ë³´ì´ìŠ¤ë¦¬í”Œ ì˜¤ë””ì˜¤ë¥¼ ì¶”ì¶œí•˜ê³  MP3ë¡œ ë³€í™˜í•´ì„œ ì €ì¥í•˜ì„¸ìš”." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://dc-sound-source-extraction.onrender.com/" />
  <meta property="og:image" content="https://dc-sound-source-extraction.onrender.com/" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Search Console (ì›í•˜ë©´ ì—¬ê¸°ì— ë©”íƒ€ ì¶”ê°€) -->
  <!-- <meta name="google-site-verification" content="VERIFICATION_TOKEN"> -->

  <!-- ì´ˆê¸° í…Œë§ˆ ê°ì§€ -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const wantDark = saved ? saved === 'dark' : prefersDark;
        document.documentElement.classList.toggle('dark', wantDark);
      } catch {}
    })();
  </script>

  <!-- Tailwind (darkMode=class) -->
  <script> tailwind = { config: { darkMode: 'class' } }; </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .spin { animation: spin 1s linear infinite }
    @keyframes spin { to { transform: rotate(360deg) } }
    .fade-in { animation: fadein .35s ease-out }
    @keyframes fadein { from{opacity:0; transform: translateY(4px)} to{opacity:1; transform:none} }
    .dropzone { border: 2px dashed rgb(148 163 184); }
    .dropzone.drag { border-color: rgb(99 102 241); background: rgba(99,102,241,.08); }
  </style>

  <!-- JSON-LD (êµ¬ê¸€ì´ ì¢‹ì•„í•¨) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "ë””ì‹œ ë³´ì´ìŠ¤ë¦¬í”Œ ì¶”ì¶œê¸°",
    "applicationCategory": "MultimediaApplication",
    "operatingSystem": "Any",
    "url": "https://dc-sound-source-extraction.onrender.com/",
    "description": "ë³´ì´ìŠ¤ë¦¬í”Œ ì˜¤ë””ì˜¤ë¥¼ ì¶”ì¶œí•˜ê³  MP3ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œ.",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
  }
  </script>
</head>
<body class="h-full bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100">
  <div class="min-h-full">
    <!-- í—¤ë” -->
    <header class="sticky top-0 z-10 backdrop-blur bg-white/70 dark:bg-slate-900/60 border-b border-slate-200 dark:border-slate-800">
      <div class="max-w-3xl mx-auto px-5 py-3 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M3 5a2 2 0 0 1 2-2h2l1-1h6l1 1h2a 2 2 0 0 1 2 2v3H3V5Zm0 5h18v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-9Zm5 2v7h2v-7H8Zm6 0v7h2v-7h-2Z"/>
          </svg>
          <h1 class="text-lg font-bold tracking-tight">ë””ì‹œ ë³´ì´ìŠ¤ë¦¬í”Œ ì¶”ì¶œê¸°</h1>
        </div>
      </div>
    </header>

    <!-- ë©”ì¸ -->
    <main class="max-w-3xl mx-auto px-5 py-8">
      <section class="mb-6">
        <p class="text-sm text-slate-500 dark:text-slate-400">
          ë³´ì´ìŠ¤ë¦¬í”Œ <b>í”Œë ˆì´ì–´ ë§í¬</b>(<code class="bg-slate-100 dark:bg-slate-800 px-1 rounded">.../voice/player?vr=...</code>) ë˜ëŠ”
          <b>iframe HTML</b>ì„ ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”. ì—”í„°(âŒ…)ë¡œ ì œì¶œ ê°€ëŠ¥!
        </p>
      </section>

      <!-- ì…ë ¥ ì¹´ë“œ -->
      <section class="fade-in rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 shadow-sm">
        <div class="p-5">
          <label class="block text-sm font-medium mb-2">ë§í¬ / iframe</label>

          <div id="dz" class="dropzone rounded-xl p-3 transition-colors">
            <textarea id="u" rows="4" placeholder="https://m.dcinside.com/voice/player?vr=...  ë˜ëŠ”  <iframe ... src='https://m.dcinside.com/voice/player?vr=...'></iframe>"
              class="w-full bg-transparent outline-none resize-y placeholder:text-slate-400"></textarea>
          </div>

          <div class="mt-3 flex flex-wrap gap-2">
            <button id="submitBtn" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M2 21L23 12 2 3l3 7 9 2-9 2-3 7z"/></svg>
              ì¶”ì¶œí•˜ê¸°
            </button>
            <button id="demoBtn" class="px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 font-semibold">
              ë°ëª¨ ì±„ìš°ê¸°
            </button>
            <button id="clearBtn" class="px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800">
              ì§€ìš°ê¸°
            </button>
          </div>
        </div>
      </section>

      <!-- ìƒíƒœ -->
      <div id="state" class="mt-5 text-sm text-slate-500 dark:text-slate-400"></div>

      <!-- ê²°ê³¼ ì¹´ë“œ -->
      <section id="resultCard" class="hidden mt-5 fade-in rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 shadow-sm">
        <div class="p-5">
          <div class="flex items-center justify-between gap-3">
            <h2 class="font-semibold">ê²°ê³¼</h2>
            <div class="flex items-center gap-2">
              <button id="copyBtn" class="px-3 py-1.5 rounded-lg border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 text-sm">URL ë³µì‚¬</button>
              <a id="dlBtn" href="#" target="_blank" rel="noopener"
                 class="px-3 py-1.5 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white text-sm">MP3 ë‹¤ìš´ë¡œë“œ</a>
            </div>
          </div>

          <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">ì•„ë˜ ë§í¬ëŠ” ì›ë³¸ ìŒì› ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤.</p>

          <div class="mt-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-3 overflow-x-auto">
            <code id="audioUrl" class="text-sm break-all"></code>
          </div>

          <audio id="player" controls class="w-full mt-4 rounded-xl"></audio>
        </div>
      </section>

      <!-- ì•ˆë‚´(ì£¼ì˜ì‚¬í•­ ê·¸ëŒ€ë¡œ) -->
      <section class="mt-8 text-sm text-slate-500 dark:text-slate-400">
        <details class="group">
          <summary class="cursor-pointer font-semibold hover:underline">ì£¼ì˜ ë° ì´ìš© ê°€ì´ë“œ</summary>
          <ul class="list-disc pl-5 mt-2 space-y-1">
            <li>ê³µê°œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë³¸ì¸ ì´ìš© ë²”ìœ„ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”. (ì €ì‘ê¶Œ/ì´ˆìƒê¶Œ/ì•½ê´€ ì¤€ìˆ˜)</li>
            <li>ê²Œì‹œë¬¼ì´ ì‚­ì œ/ë¹„ê³µê°œë©´ ì¶”ì¶œì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆì–´ìš”.</li>
            <li>í˜ì´ì§€ êµ¬ì¡°ê°€ ë°”ë€Œë©´ ì¶”ì¶œ ë¡œì§ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•  ìˆ˜ ìˆì–´ìš”.</li>
          </ul>
        </details>
      </section>

      <noscript>
        ì´ ì›¹ì•±ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë³´ì´ìŠ¤ë¦¬í”Œ ë§í¬ë¥¼ ì œì¶œí•´ ì›ë³¸ ì˜¤ë””ì˜¤ë¥¼ ì¶”ì¶œí•˜ê³  MP3ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
      </noscript>
    </main>

    <!-- í† ìŠ¤íŠ¸ -->
    <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 hidden px-4 py-2 rounded-xl bg-slate-900 text-white text-sm shadow-lg"></div>
  </div>

  <script>
    const $ = (s)=>document.querySelector(s);
    const u = $('#u'), state=$('#state'), resultCard=$('#resultCard');
    const audioUrlEl=$('#audioUrl'), player=$('#player'), dlBtn=$('#dlBtn');
    const copyBtn=$('#copyBtn'), demoBtn=$('#demoBtn'), clearBtn=$('#clearBtn'), submitBtn=$('#submitBtn'), dz=$('#dz');

    function showToast(msg){
      const t=$('#toast'); t.textContent=msg; t.classList.remove('hidden'); setTimeout(()=>t.classList.add('hidden'),1400);
    }

    function setBusy(b){
      submitBtn.disabled=b;
      submitBtn.innerHTML=b?`<svg class="w-4 h-4 spin" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="9" stroke-width="3" opacity=".25"/><path d="M21 12a9 9 0 0 1-9 9" stroke-width="3"/></svg> ì²˜ë¦¬ ì¤‘...`
                           :`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M2 21L23 12 2 3l3 7 9 2-9 2-3 7z"/></svg> ì¶”ì¶œí•˜ê¸°`;
      state.textContent=b?'â³ ì¶”ì¶œ ì¤‘...':'';
    }

    function showResult(url, mp3Url){
      audioUrlEl.textContent=url;
      player.src=url;                 // ì›ë³¸ ë¯¸ë¦¬ë“£ê¸°
      dlBtn.href=mp3Url;              // ì„œë²„ ë³€í™˜ MP3 ë‹¤ìš´ë¡œë“œ
      dlBtn.setAttribute('download','voice.mp3');
      resultCard.classList.remove('hidden');
      state.textContent='âœ… ì¶”ì¶œ ì„±ê³µ! ì•„ë˜ì—ì„œ ë¯¸ë¦¬ë“£ê¸°/ë‹¤ìš´ë¡œë“œ í•´.';
    }

    function hideResult(){
      resultCard.classList.add('hidden'); audioUrlEl.textContent='';
      player.removeAttribute('src'); player.load();
    }

    async function extract(){
      const input=u.value.trim(); if(!input){showToast('ë§í¬ ë˜ëŠ” iframeì„ ì…ë ¥í•´ì¤˜!'); return;}
      setBusy(true); hideResult();
      try{
        const res=await fetch(`/extract?link=${encodeURIComponent(input)}`,{cache:'no-store'});
        const data=await res.json();
        if(!res.ok||!data?.ok) throw new Error(data?.error||`ìš”ì²­ ì‹¤íŒ¨ (${res.status})`);
        showResult(data.audioUrl, data.mp3Url);
      }catch(e){
        state.textContent='âŒ '+(e.message||e);
      }finally{ setBusy(false); }
    }

    submitBtn.addEventListener('click',extract);
    demoBtn.addEventListener('click',()=>{
      u.value="<iframe width='280px' height='54px' src='https://m.dcinside.com/voice/player?vr=39a4c023b8c57eaf6ae2d2bc11d8303cec77c04ea0e9547cfbf9448bcefa3a0cc0' frameborder='0' scrolling='no'></iframe>";
      showToast('ë°ëª¨ ì…ë ¥ ì™„ë£Œ');
    });
    clearBtn.addEventListener('click',()=>{u.value='';hideResult();state.textContent='';});
    copyBtn.addEventListener('click',async()=>{const v=audioUrlEl.textContent.trim();if(!v)return;try{await navigator.clipboard.writeText(v);showToast('URL ë³µì‚¬ ì™„ë£Œ!');}catch{showToast('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ ğŸ˜¢');}});
    u.addEventListener('keydown',(e)=>{if((e.metaKey||e.ctrlKey)&&e.key==='Enter')extract();});
    ['dragenter','dragover'].forEach(ev=>dz.addEventListener(ev,e=>{e.preventDefault();dz.classList.add('drag');}));
    ['dragleave','drop'].forEach(ev=>dz.addEventListener(ev,e=>{e.preventDefault();dz.classList.remove('drag');}));
    dz.addEventListener('drop',(e)=>{const text=e.dataTransfer.getData('text');if(text){u.value=text.trim();showToast('ë¶™ì—¬ë„£ê¸° ì™„ë£Œ');}});
  </script>
</body>
</html>